(function(){"use strict";/*!
 * satellite-js v5.0.0
 * (c) 2013 Shashwat Kandadai and UCSC
 * https://github.com/shashwatak/satellite-js
 * License: MIT
 */var Rt=Math.PI,tt=Rt*2,si=1440,hi=398600.8,ut=6378.135,wt=60/Math.sqrt(ut*ut*ut/hi),qt=ut*wt/60,jt=.001082616,ei=-253881e-11,Dt=ei/jt,ni=2/3;function Vt(h,t,i,s,e,n){var a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0;return 367*h-Math.floor(7*(h+Math.floor((t+9)/12))*.25)+Math.floor(275*t/9)+i+17210135e-1+((a/6e4+n/60+e)/60+s)/24}function ri(h,t,i,s,e,n,a){if(h instanceof Date){var r=h;return Vt(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds())}return Vt(h,t,i,s,e,n,a)}function ai(h,t){var i=h.e3,s=h.ee2,e=h.peo,n=h.pgho,a=h.pho,r=h.pinco,m=h.plo,o=h.se2,l=h.se3,c=h.sgh2,x=h.sgh3,_=h.sgh4,u=h.sh2,d=h.sh3,M=h.si2,y=h.si3,A=h.sl2,E=h.sl3,f=h.sl4,v=h.t,p=h.xgh2,z=h.xgh3,N=h.xgh4,O=h.xh2,J=h.xh3,P=h.xi2,C=h.xi3,ht=h.xl2,U=h.xl3,K=h.xl4,g=h.zmol,Z=h.zmos,Y=t.init,R=t.opsmode,j=t.ep,I=t.inclp,w=t.nodep,lt=t.argpp,W=t.mp,q,nt,D,F,V,ct,yt,xt,rt,b,k,et,X,H,L,S,T,B,at,Q,G,gt=119459e-10,vt=.01675,It=.00015835218,Ft=.0549;G=Z+gt*v,Y==="y"&&(G=Z),Q=G+2*vt*Math.sin(G),T=Math.sin(Q),b=.5*T*T-.25,k=-.5*T*Math.cos(Q);var St=o*b+l*k,At=M*b+y*k,dt=A*b+E*k+f*T,Mt=c*b+x*k+_*T,Tt=u*b+d*k;G=g+It*v,Y==="y"&&(G=g),Q=G+2*Ft*Math.sin(G),T=Math.sin(Q),b=.5*T*T-.25,k=-.5*T*Math.cos(Q);var Et=s*b+i*k,Ot=P*b+C*k,Yt=ht*b+U*k+K*T,Xt=p*b+z*k+N*T,Zt=O*b+J*k;return et=St+Et,L=At+Ot,S=dt+Yt,X=Mt+Xt,H=Tt+Zt,Y==="n"&&(et-=e,L-=r,S-=m,X-=n,H-=a,I+=L,j+=et,F=Math.sin(I),D=Math.cos(I),I>=.2?(H/=F,X-=D*H,lt+=X,w+=H,W+=S):(ct=Math.sin(w),V=Math.cos(w),q=F*ct,nt=F*V,yt=H*V+L*D*ct,xt=-H*ct+L*D*V,q+=yt,nt+=xt,w%=tt,w<0&&R==="a"&&(w+=tt),B=W+lt+D*w,rt=S+X-L*w*F,B+=rt,at=w,w=Math.atan2(q,nt),w<0&&R==="a"&&(w+=tt),Math.abs(at-w)>Rt&&(w<at?w+=tt:w-=tt),W+=S,lt=B-W-D*w)),{ep:j,inclp:I,nodep:w,argpp:lt,mp:W}}function oi(h){var t=h.irez,i=h.d2201,s=h.d2211,e=h.d3210,n=h.d3222,a=h.d4410,r=h.d4422,m=h.d5220,o=h.d5232,l=h.d5421,c=h.d5433,x=h.dedt,_=h.del1,u=h.del2,d=h.del3,M=h.didt,y=h.dmdt,A=h.dnodt,E=h.domdt,f=h.argpo,v=h.argpdot,p=h.t,z=h.tc,N=h.gsto,O=h.xfact,J=h.xlamo,P=h.no,C=h.atime,ht=h.em,U=h.argpm,K=h.inclm,g=h.xli,Z=h.mm,Y=h.xni,R=h.nodem,j=h.nm,I=.13130908,w=2.8843198,lt=.37448087,W=5.7686396,q=.95240898,nt=1.8014998,D=1.050833,F=4.4108898,V=.0043752690880113,ct=720,yt=-720,xt=259200,rt,b,k,et,X,H,L,S,T=0,B=0,at=(N+z*V)%tt;if(ht+=x*p,K+=M*p,U+=E*p,R+=A*p,Z+=y*p,t!==0){(C===0||p*C<=0||Math.abs(p)<Math.abs(C))&&(C=0,Y=P,g=J),p>0?rt=ct:rt=yt;for(var Q=381;Q===381;)t!==2?(L=_*Math.sin(g-I)+u*Math.sin(2*(g-w))+d*Math.sin(3*(g-lt)),X=Y+O,H=_*Math.cos(g-I)+2*u*Math.cos(2*(g-w))+3*d*Math.cos(3*(g-lt)),H*=X):(S=f+v*C,k=S+S,b=g+g,L=i*Math.sin(k+g-W)+s*Math.sin(g-W)+e*Math.sin(S+g-q)+n*Math.sin(-S+g-q)+a*Math.sin(k+b-nt)+r*Math.sin(b-nt)+m*Math.sin(S+g-D)+o*Math.sin(-S+g-D)+l*Math.sin(S+b-F)+c*Math.sin(-S+b-F),X=Y+O,H=i*Math.cos(k+g-W)+s*Math.cos(g-W)+e*Math.cos(S+g-q)+n*Math.cos(-S+g-q)+m*Math.cos(S+g-D)+o*Math.cos(-S+g-D)+2*(a*Math.cos(k+b-nt)+r*Math.cos(b-nt)+l*Math.cos(S+b-F)+c*Math.cos(-S+b-F)),H*=X),Math.abs(p-C)>=ct?Q=381:(B=p-C,Q=0),Q===381&&(g+=X*rt+L*xt,Y+=L*rt+H*xt,C+=rt);j=Y+L*B+H*B*B*.5,et=g+X*B+L*B*B*.5,t!==1?(Z=et-2*R+2*at,T=j-P):(Z=et-R-U+at,T=j-P),j=P+T}return{atime:C,em:ht,argpm:U,inclm:K,xli:g,mm:Z,xni:Y,nodem:R,dndt:T,nm:j}}function li(h,t){var i,s,e,n,a,r,m,o,l,c,x,_,u,d,M,y,A,E,f,v,p,z,N,O,J,P,C,ht=15e-13;h.t=t,h.error=0;var U=h.mo+h.mdot*h.t,K=h.argpo+h.argpdot*h.t,g=h.nodeo+h.nodedot*h.t;l=K,p=U;var Z=h.t*h.t;if(N=g+h.nodecf*Z,A=1-h.cc1*h.t,E=h.bstar*h.cc4*h.t,f=h.t2cof*Z,h.isimp!==1){m=h.omgcof*h.t;var Y=1+h.eta*Math.cos(U);r=h.xmcof*(Y*Y*Y-h.delmo),y=m+r,p=U+y,l=K-y,_=Z*h.t,u=_*h.t,A=A-h.d2*Z-h.d3*_-h.d4*u,E+=h.bstar*h.cc5*(Math.sin(p)-h.sinmao),f=f+h.t3cof*_+u*(h.t4cof+h.t*h.t5cof)}z=h.no;var R=h.ecco;if(v=h.inclo,h.method==="d"){d=h.t;var j={irez:h.irez,d2201:h.d2201,d2211:h.d2211,d3210:h.d3210,d3222:h.d3222,d4410:h.d4410,d4422:h.d4422,d5220:h.d5220,d5232:h.d5232,d5421:h.d5421,d5433:h.d5433,dedt:h.dedt,del1:h.del1,del2:h.del2,del3:h.del3,didt:h.didt,dmdt:h.dmdt,dnodt:h.dnodt,domdt:h.domdt,argpo:h.argpo,argpdot:h.argpdot,t:h.t,tc:d,gsto:h.gsto,xfact:h.xfact,xlamo:h.xlamo,no:h.no,atime:h.atime,em:R,argpm:l,inclm:v,xli:h.xli,mm:p,xni:h.xni,nodem:N,nm:z},I=oi(j);R=I.em,l=I.argpm,v=I.inclm,p=I.mm,N=I.nodem,z=I.nm}if(z<=0)return h.error=2,[!1,!1];var w=Math.pow(wt/z,ni)*A*A;if(z=wt/Math.pow(w,1.5),R-=E,R>=1||R<-.001)return h.error=1,[!1,!1];R<1e-6&&(R=1e-6),p+=h.no*f,J=p+l+N,N%=tt,l%=tt,J%=tt,p=(J-l-N)%tt;var lt=Math.sin(v),W=Math.cos(v),q=R;if(O=v,c=l,C=N,P=p,n=lt,e=W,h.method==="d"){var nt={inclo:h.inclo,init:"n",ep:q,inclp:O,nodep:C,argpp:c,mp:P,opsmode:h.operationmode},D=ai(h,nt);if(q=D.ep,C=D.nodep,c=D.argpp,P=D.mp,O=D.inclp,O<0&&(O=-O,C+=Rt,c-=Rt),q<0||q>1)return h.error=3,[!1,!1]}h.method==="d"&&(n=Math.sin(O),e=Math.cos(O),h.aycof=-.5*Dt*n,Math.abs(e+1)>15e-13?h.xlcof=-.25*Dt*n*(3+5*e)/(1+e):h.xlcof=-.25*Dt*n*(3+5*e)/ht);var F=q*Math.cos(c);y=1/(w*(1-q*q));var V=q*Math.sin(c)+y*h.aycof,ct=P+c+C+y*h.xlcof*F,yt=(ct-C)%tt;o=yt,M=9999.9;for(var xt=1;Math.abs(M)>=1e-12&&xt<=10;)s=Math.sin(o),i=Math.cos(o),M=1-i*F-s*V,M=(yt-V*i+F*s-o)/M,Math.abs(M)>=.95&&(M>0?M=.95:M=-.95),o+=M,xt+=1;var rt=F*i+V*s,b=F*s-V*i,k=F*F+V*V,et=w*(1-k);if(et<0)return h.error=4,[!1,!1];var X=w*(1-rt),H=Math.sqrt(w)*b/X,L=Math.sqrt(et)/X,S=Math.sqrt(1-k);y=b/(1+S);var T=w/X*(s-V-F*y),B=w/X*(i-F+V*y);x=Math.atan2(T,B);var at=(B+B)*T,Q=1-2*T*T;y=1/et;var G=.5*jt*y,gt=G*y;h.method==="d"&&(a=e*e,h.con41=3*a-1,h.x1mth2=1-a,h.x7thm1=7*a-1);var vt=X*(1-1.5*gt*S*h.con41)+.5*G*h.x1mth2*Q;if(vt<1)return h.error=6,{position:!1,velocity:!1};x-=.25*gt*h.x7thm1*at;var It=C+1.5*gt*e*at,Ft=O+1.5*gt*e*n*Q,St=H-z*G*h.x1mth2*at/wt,At=L+z*G*(h.x1mth2*Q+1.5*h.con41)/wt,dt=Math.sin(x),Mt=Math.cos(x),Tt=Math.sin(It),Et=Math.cos(It),Ot=Math.sin(Ft),Yt=Math.cos(Ft),Xt=-Tt*Yt,Zt=Et*Yt,Wt=Xt*dt+Et*Mt,ti=Zt*dt+Tt*Mt,ii=Ot*dt,pi=Xt*Mt-Et*dt,gi=Zt*Mt-Tt*dt,vi=Ot*Mt,wi={x:vt*Wt*ut,y:vt*ti*ut,z:vt*ii*ut},bi={x:(St*Wt+At*pi)*qt,y:(St*ti+At*gi)*qt,z:(St*ii+At*vi)*qt};return{position:wi,velocity:bi}}function ci(h){return _i(h)||mi(h)||xi(h)||ui()}function _i(h){if(Array.isArray(h))return Nt(h)}function mi(h){if(typeof Symbol<"u"&&h[Symbol.iterator]!=null||h["@@iterator"]!=null)return Array.from(h)}function xi(h,t){if(h){if(typeof h=="string")return Nt(h,t);var i=Object.prototype.toString.call(h).slice(8,-1);if(i==="Object"&&h.constructor&&(i=h.constructor.name),i==="Map"||i==="Set")return Array.from(h);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Nt(h,t)}}function Nt(h,t){(t==null||t>h.length)&&(t=h.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=h[i];return s}function ui(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yi(){for(var h=arguments.length,t=new Array(h),i=0;i<h;i++)t[i]=arguments[i];var s=t[0],e=Array.prototype.slice.call(t,1),n=ri.apply(void 0,ci(e)),a=(n-s.jdsatepoch)*si;return li(s,a)}/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Lt="148";function _t(h,t,i){return Math.max(t,Math.min(i,h))}class Bt{constructor(t=0,i=0,s=0,e=1){this.isQuaternion=!0,this._x=t,this._y=i,this._z=s,this._w=e}static slerpFlat(t,i,s,e,n,a,r){let m=s[e+0],o=s[e+1],l=s[e+2],c=s[e+3];const x=n[a+0],_=n[a+1],u=n[a+2],d=n[a+3];if(r===0){t[i+0]=m,t[i+1]=o,t[i+2]=l,t[i+3]=c;return}if(r===1){t[i+0]=x,t[i+1]=_,t[i+2]=u,t[i+3]=d;return}if(c!==d||m!==x||o!==_||l!==u){let M=1-r;const y=m*x+o*_+l*u+c*d,A=y>=0?1:-1,E=1-y*y;if(E>Number.EPSILON){const v=Math.sqrt(E),p=Math.atan2(v,y*A);M=Math.sin(M*p)/v,r=Math.sin(r*p)/v}const f=r*A;if(m=m*M+x*f,o=o*M+_*f,l=l*M+u*f,c=c*M+d*f,M===1-r){const v=1/Math.sqrt(m*m+o*o+l*l+c*c);m*=v,o*=v,l*=v,c*=v}}t[i]=m,t[i+1]=o,t[i+2]=l,t[i+3]=c}static multiplyQuaternionsFlat(t,i,s,e,n,a){const r=s[e],m=s[e+1],o=s[e+2],l=s[e+3],c=n[a],x=n[a+1],_=n[a+2],u=n[a+3];return t[i]=r*u+l*c+m*_-o*x,t[i+1]=m*u+l*x+o*c-r*_,t[i+2]=o*u+l*_+r*x-m*c,t[i+3]=l*u-r*c-m*x-o*_,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,i,s,e){return this._x=t,this._y=i,this._z=s,this._w=e,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,i){const s=t._x,e=t._y,n=t._z,a=t._order,r=Math.cos,m=Math.sin,o=r(s/2),l=r(e/2),c=r(n/2),x=m(s/2),_=m(e/2),u=m(n/2);switch(a){case"XYZ":this._x=x*l*c+o*_*u,this._y=o*_*c-x*l*u,this._z=o*l*u+x*_*c,this._w=o*l*c-x*_*u;break;case"YXZ":this._x=x*l*c+o*_*u,this._y=o*_*c-x*l*u,this._z=o*l*u-x*_*c,this._w=o*l*c+x*_*u;break;case"ZXY":this._x=x*l*c-o*_*u,this._y=o*_*c+x*l*u,this._z=o*l*u+x*_*c,this._w=o*l*c-x*_*u;break;case"ZYX":this._x=x*l*c-o*_*u,this._y=o*_*c+x*l*u,this._z=o*l*u-x*_*c,this._w=o*l*c+x*_*u;break;case"YZX":this._x=x*l*c+o*_*u,this._y=o*_*c+x*l*u,this._z=o*l*u-x*_*c,this._w=o*l*c-x*_*u;break;case"XZY":this._x=x*l*c-o*_*u,this._y=o*_*c-x*l*u,this._z=o*l*u+x*_*c,this._w=o*l*c+x*_*u;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return i!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,i){const s=i/2,e=Math.sin(s);return this._x=t.x*e,this._y=t.y*e,this._z=t.z*e,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(t){const i=t.elements,s=i[0],e=i[4],n=i[8],a=i[1],r=i[5],m=i[9],o=i[2],l=i[6],c=i[10],x=s+r+c;if(x>0){const _=.5/Math.sqrt(x+1);this._w=.25/_,this._x=(l-m)*_,this._y=(n-o)*_,this._z=(a-e)*_}else if(s>r&&s>c){const _=2*Math.sqrt(1+s-r-c);this._w=(l-m)/_,this._x=.25*_,this._y=(e+a)/_,this._z=(n+o)/_}else if(r>c){const _=2*Math.sqrt(1+r-s-c);this._w=(n-o)/_,this._x=(e+a)/_,this._y=.25*_,this._z=(m+l)/_}else{const _=2*Math.sqrt(1+c-s-r);this._w=(a-e)/_,this._x=(n+o)/_,this._y=(m+l)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(t,i){let s=t.dot(i)+1;return s<Number.EPSILON?(s=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=s):(this._x=0,this._y=-t.z,this._z=t.y,this._w=s)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=s),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(_t(this.dot(t),-1,1)))}rotateTowards(t,i){const s=this.angleTo(t);if(s===0)return this;const e=Math.min(1,i/s);return this.slerp(t,e),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,i){const s=t._x,e=t._y,n=t._z,a=t._w,r=i._x,m=i._y,o=i._z,l=i._w;return this._x=s*l+a*r+e*o-n*m,this._y=e*l+a*m+n*r-s*o,this._z=n*l+a*o+s*m-e*r,this._w=a*l-s*r-e*m-n*o,this._onChangeCallback(),this}slerp(t,i){if(i===0)return this;if(i===1)return this.copy(t);const s=this._x,e=this._y,n=this._z,a=this._w;let r=a*t._w+s*t._x+e*t._y+n*t._z;if(r<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,r=-r):this.copy(t),r>=1)return this._w=a,this._x=s,this._y=e,this._z=n,this;const m=1-r*r;if(m<=Number.EPSILON){const _=1-i;return this._w=_*a+i*this._w,this._x=_*s+i*this._x,this._y=_*e+i*this._y,this._z=_*n+i*this._z,this.normalize(),this._onChangeCallback(),this}const o=Math.sqrt(m),l=Math.atan2(o,r),c=Math.sin((1-i)*l)/o,x=Math.sin(i*l)/o;return this._w=a*c+this._w*x,this._x=s*c+this._x*x,this._y=e*c+this._y*x,this._z=n*c+this._z*x,this._onChangeCallback(),this}slerpQuaternions(t,i,s){return this.copy(t).slerp(i,s)}random(){const t=Math.random(),i=Math.sqrt(1-t),s=Math.sqrt(t),e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(i*Math.cos(e),s*Math.sin(n),s*Math.cos(n),i*Math.sin(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,i=0){return this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t}fromBufferAttribute(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class it{constructor(t=0,i=0,s=0){it.prototype.isVector3=!0,this.x=t,this.y=i,this.z=s}set(t,i,s){return s===void 0&&(s=this.z),this.x=t,this.y=i,this.z=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this}applyEuler(t){return this.applyQuaternion(Qt.setFromEuler(t))}applyAxisAngle(t,i){return this.applyQuaternion(Qt.setFromAxisAngle(t,i))}applyMatrix3(t){const i=this.x,s=this.y,e=this.z,n=t.elements;return this.x=n[0]*i+n[3]*s+n[6]*e,this.y=n[1]*i+n[4]*s+n[7]*e,this.z=n[2]*i+n[5]*s+n[8]*e,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const i=this.x,s=this.y,e=this.z,n=t.elements,a=1/(n[3]*i+n[7]*s+n[11]*e+n[15]);return this.x=(n[0]*i+n[4]*s+n[8]*e+n[12])*a,this.y=(n[1]*i+n[5]*s+n[9]*e+n[13])*a,this.z=(n[2]*i+n[6]*s+n[10]*e+n[14])*a,this}applyQuaternion(t){const i=this.x,s=this.y,e=this.z,n=t.x,a=t.y,r=t.z,m=t.w,o=m*i+a*e-r*s,l=m*s+r*i-n*e,c=m*e+n*s-a*i,x=-n*i-a*s-r*e;return this.x=o*m+x*-n+l*-r-c*-a,this.y=l*m+x*-a+c*-n-o*-r,this.z=c*m+x*-r+o*-a-l*-n,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const i=this.x,s=this.y,e=this.z,n=t.elements;return this.x=n[0]*i+n[4]*s+n[8]*e,this.y=n[1]*i+n[5]*s+n[9]*e,this.z=n[2]*i+n[6]*s+n[10]*e,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this}clampLength(t,i){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(t,Math.min(i,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this}lerpVectors(t,i,s){return this.x=t.x+(i.x-t.x)*s,this.y=t.y+(i.y-t.y)*s,this.z=t.z+(i.z-t.z)*s,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,i){const s=t.x,e=t.y,n=t.z,a=i.x,r=i.y,m=i.z;return this.x=e*m-n*r,this.y=n*a-s*m,this.z=s*r-e*a,this}projectOnVector(t){const i=t.lengthSq();if(i===0)return this.set(0,0,0);const s=t.dot(this)/i;return this.copy(t).multiplyScalar(s)}projectOnPlane(t){return Pt.copy(this).projectOnVector(t),this.sub(Pt)}reflect(t){return this.sub(Pt.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const i=Math.sqrt(this.lengthSq()*t.lengthSq());if(i===0)return Math.PI/2;const s=this.dot(t)/i;return Math.acos(_t(s,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,s=this.y-t.y,e=this.z-t.z;return i*i+s*s+e*e}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,i,s){const e=Math.sin(i)*t;return this.x=e*Math.sin(s),this.y=Math.cos(i)*t,this.z=e*Math.cos(s),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,i,s){return this.x=t*Math.sin(i),this.y=s,this.z=t*Math.cos(i),this}setFromMatrixPosition(t){const i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(t){const i=this.setFromMatrixColumn(t,0).length(),s=this.setFromMatrixColumn(t,1).length(),e=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=s,this.z=e,this}setFromMatrixColumn(t,i){return this.fromArray(t.elements,i*4)}setFromMatrix3Column(t,i){return this.fromArray(t.elements,i*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=(Math.random()-.5)*2,i=Math.random()*Math.PI*2,s=Math.sqrt(1-t**2);return this.x=s*Math.cos(i),this.y=s*Math.sin(i),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Pt=new it,Qt=new Bt;class bt{constructor(){bt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,i,s,e,n,a,r,m,o,l,c,x,_,u,d,M){const y=this.elements;return y[0]=t,y[4]=i,y[8]=s,y[12]=e,y[1]=n,y[5]=a,y[9]=r,y[13]=m,y[2]=o,y[6]=l,y[10]=c,y[14]=x,y[3]=_,y[7]=u,y[11]=d,y[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new bt().fromArray(this.elements)}copy(t){const i=this.elements,s=t.elements;return i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5],i[6]=s[6],i[7]=s[7],i[8]=s[8],i[9]=s[9],i[10]=s[10],i[11]=s[11],i[12]=s[12],i[13]=s[13],i[14]=s[14],i[15]=s[15],this}copyPosition(t){const i=this.elements,s=t.elements;return i[12]=s[12],i[13]=s[13],i[14]=s[14],this}setFromMatrix3(t){const i=t.elements;return this.set(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1),this}extractBasis(t,i,s){return t.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(t,i,s){return this.set(t.x,i.x,s.x,0,t.y,i.y,s.y,0,t.z,i.z,s.z,0,0,0,0,1),this}extractRotation(t){const i=this.elements,s=t.elements,e=1/zt.setFromMatrixColumn(t,0).length(),n=1/zt.setFromMatrixColumn(t,1).length(),a=1/zt.setFromMatrixColumn(t,2).length();return i[0]=s[0]*e,i[1]=s[1]*e,i[2]=s[2]*e,i[3]=0,i[4]=s[4]*n,i[5]=s[5]*n,i[6]=s[6]*n,i[7]=0,i[8]=s[8]*a,i[9]=s[9]*a,i[10]=s[10]*a,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromEuler(t){const i=this.elements,s=t.x,e=t.y,n=t.z,a=Math.cos(s),r=Math.sin(s),m=Math.cos(e),o=Math.sin(e),l=Math.cos(n),c=Math.sin(n);if(t.order==="XYZ"){const x=a*l,_=a*c,u=r*l,d=r*c;i[0]=m*l,i[4]=-m*c,i[8]=o,i[1]=_+u*o,i[5]=x-d*o,i[9]=-r*m,i[2]=d-x*o,i[6]=u+_*o,i[10]=a*m}else if(t.order==="YXZ"){const x=m*l,_=m*c,u=o*l,d=o*c;i[0]=x+d*r,i[4]=u*r-_,i[8]=a*o,i[1]=a*c,i[5]=a*l,i[9]=-r,i[2]=_*r-u,i[6]=d+x*r,i[10]=a*m}else if(t.order==="ZXY"){const x=m*l,_=m*c,u=o*l,d=o*c;i[0]=x-d*r,i[4]=-a*c,i[8]=u+_*r,i[1]=_+u*r,i[5]=a*l,i[9]=d-x*r,i[2]=-a*o,i[6]=r,i[10]=a*m}else if(t.order==="ZYX"){const x=a*l,_=a*c,u=r*l,d=r*c;i[0]=m*l,i[4]=u*o-_,i[8]=x*o+d,i[1]=m*c,i[5]=d*o+x,i[9]=_*o-u,i[2]=-o,i[6]=r*m,i[10]=a*m}else if(t.order==="YZX"){const x=a*m,_=a*o,u=r*m,d=r*o;i[0]=m*l,i[4]=d-x*c,i[8]=u*c+_,i[1]=c,i[5]=a*l,i[9]=-r*l,i[2]=-o*l,i[6]=_*c+u,i[10]=x-d*c}else if(t.order==="XZY"){const x=a*m,_=a*o,u=r*m,d=r*o;i[0]=m*l,i[4]=-c,i[8]=o*l,i[1]=x*c+d,i[5]=a*l,i[9]=_*c-u,i[2]=u*c-_,i[6]=r*l,i[10]=d*c+x}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromQuaternion(t){return this.compose(di,t,Mi)}lookAt(t,i,s){const e=this.elements;return $.subVectors(t,i),$.lengthSq()===0&&($.z=1),$.normalize(),mt.crossVectors(s,$),mt.lengthSq()===0&&(Math.abs(s.z)===1?$.x+=1e-4:$.z+=1e-4,$.normalize(),mt.crossVectors(s,$)),mt.normalize(),kt.crossVectors($,mt),e[0]=mt.x,e[4]=kt.x,e[8]=$.x,e[1]=mt.y,e[5]=kt.y,e[9]=$.y,e[2]=mt.z,e[6]=kt.z,e[10]=$.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const s=t.elements,e=i.elements,n=this.elements,a=s[0],r=s[4],m=s[8],o=s[12],l=s[1],c=s[5],x=s[9],_=s[13],u=s[2],d=s[6],M=s[10],y=s[14],A=s[3],E=s[7],f=s[11],v=s[15],p=e[0],z=e[4],N=e[8],O=e[12],J=e[1],P=e[5],C=e[9],ht=e[13],U=e[2],K=e[6],g=e[10],Z=e[14],Y=e[3],R=e[7],j=e[11],I=e[15];return n[0]=a*p+r*J+m*U+o*Y,n[4]=a*z+r*P+m*K+o*R,n[8]=a*N+r*C+m*g+o*j,n[12]=a*O+r*ht+m*Z+o*I,n[1]=l*p+c*J+x*U+_*Y,n[5]=l*z+c*P+x*K+_*R,n[9]=l*N+c*C+x*g+_*j,n[13]=l*O+c*ht+x*Z+_*I,n[2]=u*p+d*J+M*U+y*Y,n[6]=u*z+d*P+M*K+y*R,n[10]=u*N+d*C+M*g+y*j,n[14]=u*O+d*ht+M*Z+y*I,n[3]=A*p+E*J+f*U+v*Y,n[7]=A*z+E*P+f*K+v*R,n[11]=A*N+E*C+f*g+v*j,n[15]=A*O+E*ht+f*Z+v*I,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this}determinant(){const t=this.elements,i=t[0],s=t[4],e=t[8],n=t[12],a=t[1],r=t[5],m=t[9],o=t[13],l=t[2],c=t[6],x=t[10],_=t[14],u=t[3],d=t[7],M=t[11],y=t[15];return u*(+n*m*c-e*o*c-n*r*x+s*o*x+e*r*_-s*m*_)+d*(+i*m*_-i*o*x+n*a*x-e*a*_+e*o*l-n*m*l)+M*(+i*o*c-i*r*_-n*a*c+s*a*_+n*r*l-s*o*l)+y*(-e*r*l-i*m*c+i*r*x+e*a*c-s*a*x+s*m*l)}transpose(){const t=this.elements;let i;return i=t[1],t[1]=t[4],t[4]=i,i=t[2],t[2]=t[8],t[8]=i,i=t[6],t[6]=t[9],t[9]=i,i=t[3],t[3]=t[12],t[12]=i,i=t[7],t[7]=t[13],t[13]=i,i=t[11],t[11]=t[14],t[14]=i,this}setPosition(t,i,s){const e=this.elements;return t.isVector3?(e[12]=t.x,e[13]=t.y,e[14]=t.z):(e[12]=t,e[13]=i,e[14]=s),this}invert(){const t=this.elements,i=t[0],s=t[1],e=t[2],n=t[3],a=t[4],r=t[5],m=t[6],o=t[7],l=t[8],c=t[9],x=t[10],_=t[11],u=t[12],d=t[13],M=t[14],y=t[15],A=c*M*o-d*x*o+d*m*_-r*M*_-c*m*y+r*x*y,E=u*x*o-l*M*o-u*m*_+a*M*_+l*m*y-a*x*y,f=l*d*o-u*c*o+u*r*_-a*d*_-l*r*y+a*c*y,v=u*c*m-l*d*m-u*r*x+a*d*x+l*r*M-a*c*M,p=i*A+s*E+e*f+n*v;if(p===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const z=1/p;return t[0]=A*z,t[1]=(d*x*n-c*M*n-d*e*_+s*M*_+c*e*y-s*x*y)*z,t[2]=(r*M*n-d*m*n+d*e*o-s*M*o-r*e*y+s*m*y)*z,t[3]=(c*m*n-r*x*n-c*e*o+s*x*o+r*e*_-s*m*_)*z,t[4]=E*z,t[5]=(l*M*n-u*x*n+u*e*_-i*M*_-l*e*y+i*x*y)*z,t[6]=(u*m*n-a*M*n-u*e*o+i*M*o+a*e*y-i*m*y)*z,t[7]=(a*x*n-l*m*n+l*e*o-i*x*o-a*e*_+i*m*_)*z,t[8]=f*z,t[9]=(u*c*n-l*d*n-u*s*_+i*d*_+l*s*y-i*c*y)*z,t[10]=(a*d*n-u*r*n+u*s*o-i*d*o-a*s*y+i*r*y)*z,t[11]=(l*r*n-a*c*n-l*s*o+i*c*o+a*s*_-i*r*_)*z,t[12]=v*z,t[13]=(l*d*e-u*c*e+u*s*x-i*d*x-l*s*M+i*c*M)*z,t[14]=(u*r*e-a*d*e-u*s*m+i*d*m+a*s*M-i*r*M)*z,t[15]=(a*c*e-l*r*e+l*s*m-i*c*m-a*s*x+i*r*x)*z,this}scale(t){const i=this.elements,s=t.x,e=t.y,n=t.z;return i[0]*=s,i[4]*=e,i[8]*=n,i[1]*=s,i[5]*=e,i[9]*=n,i[2]*=s,i[6]*=e,i[10]*=n,i[3]*=s,i[7]*=e,i[11]*=n,this}getMaxScaleOnAxis(){const t=this.elements,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],s=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],e=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,s,e))}makeTranslation(t,i,s){return this.set(1,0,0,t,0,1,0,i,0,0,1,s,0,0,0,1),this}makeRotationX(t){const i=Math.cos(t),s=Math.sin(t);return this.set(1,0,0,0,0,i,-s,0,0,s,i,0,0,0,0,1),this}makeRotationY(t){const i=Math.cos(t),s=Math.sin(t);return this.set(i,0,s,0,0,1,0,0,-s,0,i,0,0,0,0,1),this}makeRotationZ(t){const i=Math.cos(t),s=Math.sin(t);return this.set(i,-s,0,0,s,i,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,i){const s=Math.cos(i),e=Math.sin(i),n=1-s,a=t.x,r=t.y,m=t.z,o=n*a,l=n*r;return this.set(o*a+s,o*r-e*m,o*m+e*r,0,o*r+e*m,l*r+s,l*m-e*a,0,o*m-e*r,l*m+e*a,n*m*m+s,0,0,0,0,1),this}makeScale(t,i,s){return this.set(t,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1),this}makeShear(t,i,s,e,n,a){return this.set(1,s,n,0,t,1,a,0,i,e,1,0,0,0,0,1),this}compose(t,i,s){const e=this.elements,n=i._x,a=i._y,r=i._z,m=i._w,o=n+n,l=a+a,c=r+r,x=n*o,_=n*l,u=n*c,d=a*l,M=a*c,y=r*c,A=m*o,E=m*l,f=m*c,v=s.x,p=s.y,z=s.z;return e[0]=(1-(d+y))*v,e[1]=(_+f)*v,e[2]=(u-E)*v,e[3]=0,e[4]=(_-f)*p,e[5]=(1-(x+y))*p,e[6]=(M+A)*p,e[7]=0,e[8]=(u+E)*z,e[9]=(M-A)*z,e[10]=(1-(x+d))*z,e[11]=0,e[12]=t.x,e[13]=t.y,e[14]=t.z,e[15]=1,this}decompose(t,i,s){const e=this.elements;let n=zt.set(e[0],e[1],e[2]).length();const a=zt.set(e[4],e[5],e[6]).length(),r=zt.set(e[8],e[9],e[10]).length();this.determinant()<0&&(n=-n),t.x=e[12],t.y=e[13],t.z=e[14],st.copy(this);const o=1/n,l=1/a,c=1/r;return st.elements[0]*=o,st.elements[1]*=o,st.elements[2]*=o,st.elements[4]*=l,st.elements[5]*=l,st.elements[6]*=l,st.elements[8]*=c,st.elements[9]*=c,st.elements[10]*=c,i.setFromRotationMatrix(st),s.x=n,s.y=a,s.z=r,this}makePerspective(t,i,s,e,n,a){const r=this.elements,m=2*n/(i-t),o=2*n/(s-e),l=(i+t)/(i-t),c=(s+e)/(s-e),x=-(a+n)/(a-n),_=-2*a*n/(a-n);return r[0]=m,r[4]=0,r[8]=l,r[12]=0,r[1]=0,r[5]=o,r[9]=c,r[13]=0,r[2]=0,r[6]=0,r[10]=x,r[14]=_,r[3]=0,r[7]=0,r[11]=-1,r[15]=0,this}makeOrthographic(t,i,s,e,n,a){const r=this.elements,m=1/(i-t),o=1/(s-e),l=1/(a-n),c=(i+t)*m,x=(s+e)*o,_=(a+n)*l;return r[0]=2*m,r[4]=0,r[8]=0,r[12]=-c,r[1]=0,r[5]=2*o,r[9]=0,r[13]=-x,r[2]=0,r[6]=0,r[10]=-2*l,r[14]=-_,r[3]=0,r[7]=0,r[11]=0,r[15]=1,this}equals(t){const i=this.elements,s=t.elements;for(let e=0;e<16;e++)if(i[e]!==s[e])return!1;return!0}fromArray(t,i=0){for(let s=0;s<16;s++)this.elements[s]=t[s+i];return this}toArray(t=[],i=0){const s=this.elements;return t[i]=s[0],t[i+1]=s[1],t[i+2]=s[2],t[i+3]=s[3],t[i+4]=s[4],t[i+5]=s[5],t[i+6]=s[6],t[i+7]=s[7],t[i+8]=s[8],t[i+9]=s[9],t[i+10]=s[10],t[i+11]=s[11],t[i+12]=s[12],t[i+13]=s[13],t[i+14]=s[14],t[i+15]=s[15],t}}const zt=new it,st=new bt,di=new it(0,0,0),Mi=new it(1,1,1),mt=new it,kt=new it,$=new it,Ut=new bt,$t=new Bt;class ft{constructor(t=0,i=0,s=0,e=ft.DefaultOrder){this.isEuler=!0,this._x=t,this._y=i,this._z=s,this._order=e}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,s,e=this._order){return this._x=t,this._y=i,this._z=s,this._order=e,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,s=!0){const e=t.elements,n=e[0],a=e[4],r=e[8],m=e[1],o=e[5],l=e[9],c=e[2],x=e[6],_=e[10];switch(i){case"XYZ":this._y=Math.asin(_t(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(-l,_),this._z=Math.atan2(-a,n)):(this._x=Math.atan2(x,o),this._z=0);break;case"YXZ":this._x=Math.asin(-_t(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(r,_),this._z=Math.atan2(m,o)):(this._y=Math.atan2(-c,n),this._z=0);break;case"ZXY":this._x=Math.asin(_t(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(-c,_),this._z=Math.atan2(-a,o)):(this._y=0,this._z=Math.atan2(m,n));break;case"ZYX":this._y=Math.asin(-_t(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(x,_),this._z=Math.atan2(m,n)):(this._x=0,this._z=Math.atan2(-a,o));break;case"YZX":this._z=Math.asin(_t(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-l,o),this._y=Math.atan2(-c,n)):(this._x=0,this._y=Math.atan2(r,_));break;case"XZY":this._z=Math.asin(-_t(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(x,o),this._y=Math.atan2(r,n)):(this._x=Math.atan2(-l,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,s===!0&&this._onChangeCallback(),this}setFromQuaternion(t,i,s){return Ut.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Ut,i,s)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return $t.setFromEuler(this),this.setFromQuaternion($t,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}ft.DefaultOrder="XYZ",ft.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Lt}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Lt);var ot;(h=>{h.FACTOR=1e3,h.EARTH_RADIUS=6378/h.FACTOR,h.CAMERA_DISTANCE=16e3/h.FACTOR,h.COLOR_DEEP_BLACK="#111827",h.COLOR_BLACK="#1F2937",h.COLOR_DARK_GRAY="#334155",h.COLOR_GRAY="#6B7280",h.COLOR_ORANGE="#D97706",h.COLOR_AQUA="#22D3EE",h.SATELLITES_MESH_NAME="satellites",h.ORBITS_MESH_NAME="orbits",h.EARTH_MESH_NAME="earth",h.ORBIT_POINTS=50,h.CAMERA_MAX_DISTANCE=1e5,h.CAMERA_MIN_DISTANCE=.01,h.LOWEST_EARTH_ORBIT=h.EARTH_RADIUS,h.HIGHEST_EARTH_ORBIT=75e3/h.FACTOR,h.MIN_SPEED=0,h.MAX_SPEED=11,h.TIME_JUMP=250})(ot||(ot={}));var pt=(h=>(h[h.INIT=0]="INIT",h[h.COORDINATES=1]="COORDINATES",h[h.ORBITS=2]="ORBITS",h))(pt||{});let Ht=new Array,Ct,Gt=0;onmessage=h=>{if(h.data.instruction==pt.INIT&&(h.data.data&&(Ht=h.data.data),h.data.settings&&(Ct=h.data.settings)),h.data.instruction==pt.COORDINATES){const t=new Date;setInterval(()=>{const i=new Array;for(let n=0;n<Ht.length;n++){const a=Ht[n];i.push(Kt(a.satrec,t))}postMessage({instruction:pt.COORDINATES,data:i});const s=Ct!=null&&Ct.timeMultiplier?Ct.timeMultiplier:1,e=new Date().getTime()+Gt*ot.TIME_JUMP*s;t.setTime(e),Gt++},ot.TIME_JUMP)}if(h.data.instruction==pt.ORBITS){const t=new Array,i=h.data.data;for(let s=0;s<i.length;s++){const e=i[s];t.push(zi(e.satrec,new Date))}postMessage({instruction:pt.ORBITS,data:t})}};const Jt=h=>{const t=new it(0,0,0);if(h){const i=h;t.set(i.x/ot.FACTOR,i.y/ot.FACTOR,i.z/ot.FACTOR),t.applyEuler(new ft(-Math.PI/2,0,0))}return t},Kt=(h,t)=>{const i=yi(h,t),s=Jt(i.position),e=Jt(i.velocity);return{position:s,velocity:e}},zi=(h,t)=>{const i=new Array,s=new it,n=2*Math.PI/h.no/ot.ORBIT_POINTS;let a=0;for(;a<ot.ORBIT_POINTS+1;){const r=t.getTime()+a*n*6e4,m=Kt(h,new Date(r)).position;s.set(m.x,m.y,m.z),i.push(s.clone()),a++}return i}})();
